jdk: oraclejdk8
language: android

android:
  components:
    # Using latest platform tools
    - tools
    - platform-tools

    # The BuildTools version used by your project
    - build-tools-27.0.3

    # The SDK version used to compile your project
    - android-27

    # Additional components
    - extra-google-google_play_services
    - extra-google-m2repository
    - extra-android-m2repository

before_install:
  - yes | sdkmanager "platforms;android-27"

before_cache:
  - rm -f  $HOME/.gradle/caches/modules-2/modules-2.lock
  - rm -fr $HOME/.gradle/caches/*/plugin-resolution/

cache:
  directories:
    - $HOME/.gradle/caches/
    - $HOME/.gradle/wrapper/
    - $HOME/.android/build-cache

script: ./gradlew lint test

deploy:
  - provider: script
    script: ./gradlew gitPublishPush
    skip_cleanup: true
    on:
      tags: true
  - provider: script
    script: ./gradlew gitPublishPush
    skip_cleanup: true
    on:
      branch: master

notifications:
  email: false
  slack:
    secure: yNfc4e971V46MOv5pMYFEBX0L94w9n+s/zjSoRDavOlX7JLlZozUunyEEIDHGEwXFRIyNaSLKqmjZHmXK/Ahr+myj6zDm34YNpor3HDPnkr0GAhK1AjSbIbLqXkiSLOOcKi8xRe2Lt/COFpn/C8Q0Bhp4ltDuE0VNW8Z8yAOh5uXCBC8RXw5KwwGX1s9veKermIU8icaWEj4DI1f2HtZL9thnwUKE98HrhkG/GN0ezFr+C9IghFZaVrmyiw67OcmFmpof1yHP8TZZy46gZYBVtQIJma7L2IKJ6jQ9F3KBfDpmeC99dKXPq51+Vnap44FkNu8iqQmA0hyykxE7mast1pjXjRJ+isgW9dyGFzYHPuBRTVyOlq+FzWydOptMQMSxe0nzN8m6QTdCELnHST4zzOLeVmtXmxZX8qYq/ciIxUFs+5J+ONoUM+v4a5hc4c/Y5lvfSg8ZN3T8fcme08+cdligJUpoCd7G6XLUQLKUxcoHQThx5zFyLqUsX7+MVI5IuZdUNwmDqg2DfOm69nN+CvV8Ze64z6klSkjaz3VRi8r1oSoDItbFX0IziUF8twXZgRT9xRq82IbCBMbw+Jc/G4J3DVnb337dDNFfpvwLg+DG9qanx1KbDda04/nocbuTJ1yfU7fCkMm+jqiSBx92+kjhtO9n56/iemZWLO3Sco=
